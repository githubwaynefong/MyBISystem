--转化率维度数据提取表（从clickstream_log表中提取）
DROP TABLE IF EXISTS conversion_input;
CREATE TABLE IF NOT EXISTS conversion_input(
	url STRING					COMMENT '用户访问的链接',
	uuid STRING					COMMENT '通用唯一识别码',
	sessionid STRING			COMMENT 'Session的唯一编号',
	csvp INT					COMMENT '该点击行为在其Session中的顺序'
) PARTITIONED BY(dt STRING)
ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t';

--转化率分析中间结果表
DROP TABLE IF EXISTS conversion_middle_result;
CREATE TABLE IF NOT EXISTS conversion_middle_result(
	sessionid STRING			COMMENT 'Session的唯一编号',
	uuid STRING					COMMENT '通用唯一识别码',
	process STRING				COMMENT '漏斗模型步骤'
)PARTITIONED BY (dt STRING)
ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t';

--转化率分析最终统计结果表
DROP TABLE IF EXISTS conversion_result;
CREATE TABLE IF NOT EXISTS conversion_result(
	process STRING				COMMENT '漏斗模型步骤',
	countprocess INT			COMMENT '统计漏斗模型各步骤的点击数',
	countuuid INT				COMMENT '统计漏斗模型各步骤的点击人数'
)PARTITIONED BY (dt STRING)
ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t';